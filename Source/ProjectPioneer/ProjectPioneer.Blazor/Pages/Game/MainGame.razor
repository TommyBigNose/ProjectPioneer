@page "/Game/MainGame"
@using ProjectPioneer.Blazor.Pages.Components;

@inject ILogger<MainGame> Logger
@inject ProjectPioneer.Systems.IGame ProjectPioneerGame

<h3>Project Pioneer Main Game</h3>
<ProjectPioneer.Blazor.Pages.Components.DebugTools DebugCallback="@Callback" />
<br />
<br />
<br />

<ProjectPioneer.Blazor.Pages.Components.HeroDisplay Hero="@ProjectPioneerGame.Hero" />
<br />
<br />
<ProjectPioneer.Blazor.Pages.Components.HeroStatsTotal Hero="@ProjectPioneerGame.Hero" />
<br />
<br />
<ProjectPioneer.Blazor.Pages.Components.InventoryDisplay @ref="InventoryComponent" InventoryCallback="@Callback"/>
<br />
<br />


@code {
    protected InventoryDisplay? InventoryComponent;

    protected override void OnInitialized()
    {
        InventoryComponent = new InventoryDisplay();
    }

    private void Callback()
    {
        InventoryComponent?.Refresh();
        base.InvokeAsync(StateHasChanged);
        Logger.LogInformation("Callback called");
    }
}
